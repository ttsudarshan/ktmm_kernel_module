<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WSL Nested Virtualization &#8212; KTMM 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=cb25574f" />
    <script src="../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Module Installation" href="installation.html" />
    <link rel="prev" title="Testing Environment Setup" href="vm-setup.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="wsl-nested-virtualization">
<h1>WSL Nested Virtualization<a class="headerlink" href="#wsl-nested-virtualization" title="Link to this heading">¶</a></h1>
<p>This is a short helper guide for anyone wanting to use libvirt under WSL in
Windows using nested virtualization. It is recommended that the user has the
Windows Terminal emulator installed, or something similar.</p>
<ol class="arabic">
<li><dl class="simple">
<dt>Open ‘Turn Windows features on or off’ and turn on the following:</dt><dd><ul class="simple">
<li><p>Hyper-V</p></li>
<li><p>Virtual Machine Platform</p></li>
<li><p>WindowsSubsystem for Linux</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Restart machine.</p></li>
<li><p>Open PowerShell in the Terminal and install WSL Ubuntu:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wsl --update
wsl --install -d Ubuntu
wsl -v
</pre></div>
</div>
</li>
</ol>
<p><strong>NOTE:</strong> After the above, make sure the output says WSL version 2.</p>
<ol class="arabic" start="4">
<li><p>Open WSL Ubuntu and updated the user and password. Afterwards, make sure that
all the packages are up-to-date:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt update
sudo apt upgrade
</pre></div>
</div>
</li>
<li><p>To configure WSL to use nested virtualization, add the file <code class="docutils literal notranslate"><span class="pre">.wslconfig</span></code> in
the Windows current user directory. Edit the file and add the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[wsl2]
nestedVirtualization=true
</pre></div>
</div>
</li>
<li><p>Shutdown WSL in PowerShell:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wsl.exe --shutdown
</pre></div>
</div>
</li>
</ol>
<p>Nested virtualization and WSL should now be fully enabled and installed, and the
user is now ready to install and use libvirt. If you have not see the article,
check out <a class="reference internal" href="vm-setup.html"><span class="doc">Testing Environment Setup</span></a>.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm-setup.html">Testing Environment Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">WSL Nested Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Module Installation</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, FreshlyCutWax.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/system/wsl-nested-vm.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>